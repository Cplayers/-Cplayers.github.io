"use strict";(self.webpackChunkcplay=self.webpackChunkcplay||[]).push([[111],{1415:function(n,e,i){i.d(e,{Z:function(){return q}});var r,t,a,s,o,l,c=i(168),d=i(1413),h=i(9439),u=i(8963),g=i(9349),p=i(2499),x=i(4224),f=i(4925),v=i(1816),m=i(5859),b=["src","iconame","rootMargin"],y=u.memo((function(n){var e=n.src,i=n.iconame,r=n.rootMargin,t=(0,f.Z)(n,b),a=(0,u.useState)(!0),s=(0,h.Z)(a,2),o=s[0],l=s[1],c=(0,u.useState)(!1),g=(0,h.Z)(c,2),x=g[0],y=g[1],w=(0,u.useRef)(null),k=(0,p.Z)(w,{rootMargin:r||"0px 0px 0px 0px"}),_=(0,h.Z)(k,1)[0];return(0,u.useEffect)((function(){if(_){var n=w.current;""!==e&&void 0!==e?(n.src=e,n.complete&&l(!1)):y(!0)}}),[_,e]),(0,m.jsxs)(j,(0,d.Z)((0,d.Z)({},t),{},{children:[o&&(0,m.jsx)("div",{className:"loading",children:(0,m.jsx)(Z,{isError:x,children:(0,m.jsx)(v.Z,{name:i})})}),(0,m.jsx)("img",{ref:w,alt:i,onLoad:function(){l(!1)},onError:function(){y(!0)}})]}))})),j=g.ZP.div(r||(r=(0,c.Z)(["\n  transform: scale(0.8);\n  width: 60px;\n  height: 60px;\n  border-radius: 10px;\n  border: 1px solid var(--bg-gray-100);\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  .loading {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    padding: 10px;\n    background-color: var(--bg-white-100);\n    box-sizing: border-box;\n    z-index: 1;\n  }\n  .icon {\n    width: 40px;\n    height: 40px;\n    transition: fill 0.2s;\n    fill: var(--bg-gray-100);\n  }\n  img,\n  .motion {\n    width: inherit;\n    height: inherit;\n  }\n"]))),w=(0,g.F4)(t||(t=(0,c.Z)(["\nfrom {\n  opacity: 1;\n}\nto {\n  opacity: 0.5;\n}\n"]))),Z=g.ZP.div(a||(a=(0,c.Z)(["\n  width: inherit;\n  height: inherit;\n  animation: "," 0.4s linear 0s infinite alternate-reverse;\n  animation-play-state: ",";\n"])),w,(function(n){return n.isError?"paused":"running"})),k=y,_=i(9682),C=u.memo((function(n){var e=n.songs,i=n.scrollToBottom,r=n.DoubleClick,t=n.hintwords,a=n.loadMore,s=(0,u.useState)(!0),o=(0,h.Z)(s,2),l=o[0],c=o[1],g=(0,u.useRef)(null),x=(0,p.Z)(g,{threshold:[0,.25,.5,.75,1]}),f=(0,h.Z)(x,2),v=f[0],b=f[1],y=(0,u.useRef)(!1);return(0,u.useEffect)((function(){v&&b>=.98&&!y.current&&(y.current=!0,i((function(n){var e=n.loading;c(e)})),setTimeout((function(){y.current=!1}),5e3))}),[v,b,i]),(0,m.jsx)(E,{children:0===e.length?(0,m.jsx)("p",{children:t||"\u627e\u4e0d\u5230\u3002\u3002\u3002\u6362\u4e2a\u8bcd\u8bd5\u8bd5~"}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"songitems",onDoubleClick:function(n){if(n.target.classList.contains("song_item")||n.target.parentElement.classList.contains("song_item")){var e,i,t;if(n.target.classList.contains("song_item")){t=n.target.getAttribute("data");var a=n.target.innerText.split("\n"),s=(0,h.Z)(a,2);e=s[0],i=s[1]}else{t=n.target.parentElement.getAttribute("data");var o=n.target.parentElement.innerText.split("\n"),l=(0,h.Z)(o,2);e=l[0],i=l[1]}r({id:t,name:e,artist:i})}},children:e.map((function(n){return(0,m.jsx)(N,(0,d.Z)({},n),n.id)}))}),!0===l&&!0===a?(0,m.jsx)(z,{ref:g,children:(0,m.jsx)(_.E,{})}):(0,m.jsx)(m.Fragment,{})]})})}));function N(n){var e=n.id,i=n.pic,r=n.name,t=n.artist,a=n.duration;return(0,m.jsxs)(P,{className:"song_item",data:e,children:[(0,m.jsx)(k,{className:"record",src:i,iconame:"record",rootMargin:"0px 0px 400px 0px"}),(0,m.jsx)("div",{className:"name",title:r,children:r}),(0,m.jsx)("div",{className:"artist",artist:t,children:t}),(0,m.jsx)("div",{className:"duration",duration:a,children:(0,x.G)(a/1e3,0)})]})}var E=g.ZP.div(s||(s=(0,c.Z)(["\n  margin-top: 20px;\n  & > p {\n    color: var(--font-gray-200);\n    font-size: 15px;\n    margin: 20px;\n    text-align: center;\n  }\n  .songitems {\n    width: 100%;\n  }\n"]))),P=g.ZP.div(o||(o=(0,c.Z)(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: 90px 2fr 1fr 1fr 60px;\n  grid-template-rows: 70px;\n  grid-template-areas: 'record name artist . duration';\n  align-items: center;\n  border-bottom: 1px solid var(--bg-gray-100);\n  cursor: pointer;\n  .record {\n    grid-area: record;\n  }\n  .name,\n  .artist,\n  .duration {\n    width: 100%;\n    color: var(--font-gray-100);\n    font-size: 14px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    letter-spacing: 2px;\n  }\n  .name {\n    grid-area: name;\n    font-size: 20px;\n    color: var(--bg-gray-200);\n  }\n  .artist {\n    grid-area: artist;\n  }\n  .duration {\n    grid-area: duration;\n  }\n"]))),z=g.ZP.div(l||(l=(0,c.Z)(["\n  width: 100%;\n  height: 70px;\n  position: relative;\n"]))),q=C},2726:function(n,e,i){var r=i(8963),t=i(1750);e.Z=function(){var n=(0,r.useRef)(null);return(0,r.useEffect)((function(){return n.current=t.rC,function(){n.current()}}),[]),n}},2568:function(n,e,i){i.r(e);var r,t,a,s=i(168),o=i(8963),l=i(9349),c=i(9607),d=i(3431),h=i(2610),u=i(4276),g=i(1415),p=i(1816),x=i(6822),f=i(8759),v=i(2726),m=i(620),b=i(5859),y=(0,l.ZP)(c.E.div)(r||(r=(0,s.Z)(["\n  width: 95%;\n  margin: 0 auto;\n"]))),j=l.ZP.div(t||(t=(0,s.Z)(["\n  height: 200px;\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  justify-content: space-between;\n  color: var(--font-gray-200);\n  border-bottom: 1px solid var(--bg-gray-100);\n  .playlist_pic {\n    height: 100px;\n    width: 100px;\n    padding: 15px;\n    border: 2px solid var(--bg-gray-100);\n    border-radius: 10px;\n    margin-left: 20px;\n    svg {\n      width: inherit;\n      height: inherit;\n      fill: var(--bg-gray-100);\n    }\n  }\n  .playlist_dec {\n    flex: 1;\n    height: 140px;\n    h3 {\n      line-height: 50px;\n      font-weight: bold;\n      font-size: 22px;\n    }\n  }\n  .playlist_clear {\n    align-self: end;\n  }\n  .clear_cloud {\n    display: inline-block;\n    padding: 5px 10px;\n    font-size: 15px;\n    background-color: var(--bg-gray-100);\n    margin: 10px;\n    color: var(--font-white-100);\n    border-radius: 6px;\n    cursor: pointer;\n    svg {\n      width: 14px;\n      height: 14px;\n      fill: var(--bg-white-100);\n      margin-right: 3px;\n    }\n  }\n"]))),w=l.ZP.div(a||(a=(0,s.Z)([""])));e.default=function(){(0,v.Z)();var n=(0,d.v9)((function(n){return n.cloud.cloudList})),e=(0,d.v9)((function(n){return n.cloud.lastUploadTime})),i=(0,d.I0)();(0,o.useEffect)((function(){n.length>0?i((0,u.Gj)()):i((0,u.Uk)({offset:0}))}),[]),(0,o.useEffect)((function(){n.length>0&&e!==n[0].addTime&&i((0,u.Uk)({offset:0}))}),[i,e,n]);var r=(0,o.useCallback)((function(e){var r=e.id,t=e.name,a=e.artist,s=n.find((function(n){return+n.id===+r}));i((0,x.A7)(!0)),(0,m.C)("\u6b63\u5728\u5c1d\u8bd5\u83b7\u53d6\u97f3\u9891..."),i((0,f.X7)({id:r})).then((function(n){var e=n.payload.src;i((0,f.e2)({id:r,src:e,name:t,artist:a,picUrl:s.pic,sameUrled:!1})),(0,m.C)("\u83b7\u53d6\u6210\u529f")})).catch((function(){(0,m.C)("\u672a\u77e5\u9519\u8bef\uff0c\u83b7\u53d6\u5931\u8d25")}))}),[i,n]);return(0,b.jsxs)(y,{variants:h.qG,initial:"enter",animate:"show",transition:"transition",exit:"exit",children:[(0,b.jsxs)(j,{children:[(0,b.jsx)("div",{className:"playlist_pic",children:(0,b.jsx)(p.Z,{name:"cloud"})}),(0,b.jsxs)("div",{className:"playlist_dec",children:[(0,b.jsx)("h3",{children:"\u7f51\u6613\u4e91\u76d8"}),(0,b.jsx)("p",{children:"\u53ea\u663e\u793a\u6700\u65b030\u9996"})]}),(0,b.jsx)("div",{className:"playlist_clear",children:(0,b.jsxs)("div",{className:"clear_cloud",onClick:function(){i((0,u.Mp)())},children:[(0,b.jsx)(p.Z,{name:"garbage"}),(0,b.jsx)("span",{children:"\u6e05\u7a7a\u7f13\u5b58"})]})})]}),(0,b.jsx)(w,{children:(0,b.jsx)(g.Z,{songs:n,hintwords:"\u4e91\u76d8\u7a7a\u7a7a\u5982\u4e5f\uff0c\u5feb\u53bb\u6536\u85cf\u4f60\u559c\u6b22\u7684\u6b4c\u66f2\u5427~",scrollToBottom:function(n){n({loading:!1,isError:!1})},DoubleClick:r,loadMore:!1})})]},"cloudPage")}},7937:function(n,e,i){i.r(e);var r,t,a,s=i(168),o=i(8963),l=i(9607),c=i(3431),d=i(9349),h=i(2610),u=i(1415),g=i(1816),p=i(6822),x=i(8759),f=i(5410),v=i(785),m=i(8812),b=i(620),y=i(5859),j=(0,d.ZP)(l.E.div)(r||(r=(0,s.Z)(["\n  width: 95%;\n  margin: 0 auto;\n"]))),w=d.ZP.div(t||(t=(0,s.Z)([""]))),Z=d.ZP.div(a||(a=(0,s.Z)(["\n  height: 200px;\n  display: flex;\n  align-items: center;\n  gap: 20px;\n  justify-content: space-between;\n  color: var(--font-gray-200);\n  border-bottom: 1px solid var(--bg-gray-100);\n  .playlist_pic {\n    height: 100px;\n    width: 100px;\n    padding: 15px;\n    border: 2px solid var(--bg-gray-100);\n    border-radius: 10px;\n    margin-left: 20px;\n    svg {\n      width: inherit;\n      height: inherit;\n      fill: var(--bg-gray-100);\n    }\n  }\n  .playlist_dec {\n    flex: 1;\n    height: 140px;\n    h3 {\n      line-height: 50px;\n      font-weight: bold;\n      font-size: 22px;\n    }\n  }\n  .playlist_clear {\n    align-self: end;\n  }\n  .clear_history {\n    display: inline-block;\n    padding: 5px 10px;\n    font-size: 15px;\n    background-color: var(--bg-gray-100);\n    margin: 10px;\n    color: var(--font-white-100);\n    border-radius: 6px;\n    cursor: pointer;\n    svg {\n      width: 14px;\n      height: 14px;\n      fill: var(--bg-white-100);\n      margin-right: 3px;\n    }\n  }\n"])));e.default=function(){var n=(0,c.I0)(),e=(0,c.v9)((function(n){return n.history.history})),i=(0,o.useMemo)((function(){return e.map((function(n){return{id:n.id,pic:n.picUrl,name:n.title,artist:n.artist,duration:n.duration||0}}))}),[e]),r=(0,m.M)().selectSong,t=(0,o.useCallback)((function(i){var t=i.id,a=i.name,s=i.artist,o=e.find((function(n){return n.id===t}));n((0,p.A7)(!0)),n((0,x.Rj)(o.lyrics)),n((0,f.LS)(o.lytimes)),Number.isInteger(+t)?((0,b.C)("\u6062\u590d\u5236\u4f5c\u8bb0\u5f55\u4e2d..."),n((0,x.XG)({id:t,name:a,artist:s,br:o.quality})).then((function(){(0,b.C)("\u6062\u590d\u6210\u529f")})).catch((function(){(0,b.C)("\u672a\u77e5\u9519\u8bef\uff0c\u83b7\u53d6\u5931\u8d25")}))):r(t).then((function(e){n((0,x.Ow)({id:t,src:URL.createObjectURL(e.file),name:a,artist:s,picUrl:o.picUrl}))}))}),[n,e,r]),a=(0,m.M)().clearAllSongs;return(0,y.jsxs)(j,{variants:h.qG,initial:"enter",animate:"show",transition:"transition",exit:"exit",children:[(0,y.jsxs)(Z,{children:[(0,y.jsx)("div",{className:"playlist_pic",children:(0,y.jsx)(g.Z,{name:"history"})}),(0,y.jsxs)("div",{className:"playlist_dec",children:[(0,y.jsx)("h3",{children:"\u8fd9\u91cc\u662f\u4f60\u7684\u5236\u4f5c\u8bb0\u5f55"}),(0,y.jsx)("p",{children:"\u70b9\u6309\u9996\u9875\u7684\u590d\u5236\u6309\u94ae\u4fdd\u5b58\u8bb0\u5f55"})]}),(0,y.jsx)("div",{className:"playlist_clear",children:(0,y.jsxs)("div",{className:"clear_history",onClick:function(){n((0,v.j1)()),a()},children:[(0,y.jsx)(g.Z,{name:"garbage"}),(0,y.jsx)("span",{children:"\u6e05\u7a7a\u8bb0\u5f55"})]})})]}),(0,y.jsx)(w,{children:(0,y.jsx)(u.Z,{songs:i,hintwords:"\u6682\u65e0\u5236\u4f5c\u8bb0\u5f55",scrollToBottom:function(n){n({loading:!1,isError:!1})},DoubleClick:t,loadMore:!1})})]},"historyPage")}},1439:function(n,e,i){i.r(e);var r,t,a,s=i(168),o=i(9439),l=i(8963),c=i(3431),d=i(9711),h=i(9349),u=i(1816),g=i(2741),p=i(5859),x=l.memo((function(){var n=(0,c.v9)((function(n){return n.user})),e=n.key,i=n.qrimg,r=n.verify.code,t=(0,c.I0)(),a=(0,d.s0)();(0,l.useEffect)((function(){t((0,g.OT)())}),[]);var s=(0,l.useRef)(0),h=(0,l.useState)(!1),x=(0,o.Z)(h,2),v=x[0],b=x[1],y=(0,l.useCallback)((function(n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:13e4,i=!1,r=setInterval((function(){t((0,g.JF)(n)).then((function(n){""===n.payload.cookie||i||(i=!0,t((0,g.bG)()))}))}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3);return setTimeout((function(){b(!0),clearInterval(r)}),e),r}),[t]);(0,l.useEffect)((function(){return""!==e&&(s.current=y(e)),function(){clearInterval(s.current)}}),[e,y]),(0,l.useEffect)((function(){1===r?(clearInterval(s.current),a("/space")):2===r&&b(!0)}),[r,a,t]);return(0,p.jsx)(f,{children:(0,p.jsxs)("div",{className:"qr_box",children:[(0,p.jsxs)("div",{className:"qr_contain",children:[v&&(0,p.jsx)("div",{className:"refresh_hint",children:(0,p.jsx)("p",{onClick:function(){t((0,g.OT)()).then((function(){b(!1)}))},children:"\u4e8c\u7ef4\u7801\u5df2\u5931\u6548\uff0c\u8bf7\u70b9\u51fb\u5237\u65b0"})}),(0,p.jsx)("div",{className:"qr_img",children:""===i?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(m,{}),(0,p.jsx)(u.Z,{name:"qr"})]}):(0,p.jsx)("img",{src:i,alt:"\u4e8c\u7ef4\u7801"})})]}),(0,p.jsxs)("div",{className:"scan_hint",children:["\u8bf7\u4f7f\u7528",(0,p.jsx)("b",{children:" \u7f51\u6613\u4e91App "}),"\u626b\u63cf\u4e8c\u7ef4\u7801\u767b\u5f55"]})]})})})),f=h.ZP.div(r||(r=(0,s.Z)(["\n  width: 100%;\n  height: calc(100vh - 144px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  .qr_contain {\n    position: relative;\n    width: 200px;\n    height: 200px;\n    overflow: hidden;\n    border: 1px solid var(--bg-gray-100);\n    border-radius: 10px;\n  }\n  .refresh_hint {\n    width: inherit;\n    height: inherit;\n    position: absolute;\n    background: var(--bg-black-150);\n    cursor: pointer;\n    p {\n      color: var(--font-white-100);\n      font-size: 14px;\n      font-weight: bold;\n      text-align: center;\n      line-height: 200px;\n    }\n  }\n  .qr_img {\n    width: 100%;\n    height: 100%;\n    img {\n      width: inherit;\n      height: inherit;\n    }\n    .icon {\n      fill: var(--bg-black-110);\n      width: inherit;\n      height: inherit;\n    }\n  }\n  .scan_hint {\n    font-size: 12px;\n    color: var(--font-gray-200);\n    text-align: center;\n    margin-top: 10px;\n    b {\n      color: var(--font-red-100);\n      font-weight: bold;\n    }\n  }\n"]))),v=(0,h.F4)(t||(t=(0,s.Z)(["\n  from {\n    transform: rotate(0);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),m=h.ZP.div(a||(a=(0,s.Z)(["\n  position: absolute;\n  top: calc(50% - 20px);\n  left: calc(50% - 20px);\n  width: 40px;\n  height: 40px;\n  border: 4px solid #000;\n  border-top-color: rgba(0, 0, 0, 0.2);\n  border-right-color: rgba(0, 0, 0, 0.2);\n  border-bottom-color: rgba(0, 0, 0, 0.2);\n  border-radius: 100%;\n  animation: "," infinite 0.75s linear;\n"])),v);e.default=x},7790:function(n,e,i){i.r(e),i.d(e,{default:function(){return L}});var r,t,a,s,o=i(168),l=i(1413),c=i(9439),d=i(8963),h=i(5521),u=i(3431),g=i(9349),p=i(9607),x=i(7862),f=i(6715),v=i(1816),m=i(5859),b=d.memo((function(n){var e=n.searchHandler,i=(0,h.lr)(),r=(0,c.Z)(i,1)[0],t=(0,d.useRef)();return(0,d.useEffect)((function(){t.current.value=r.get("keywords")||""}),[r]),(0,f.Z)("enter",(function(){e(t.current.value)}),{target:t}),(0,m.jsx)(y,{children:(0,m.jsxs)("div",{className:"searchbox",children:[(0,m.jsx)("div",{className:"search_btn",onClick:function(){return e(t.current.value)},children:(0,m.jsx)(v.Z,{name:"search"})}),(0,m.jsx)("input",{className:"search_input",type:"text",maxLength:"100",placeholder:"\u641c\u7d22\u97f3\u4e50...",ref:t}),(0,m.jsx)("div",{className:"search_clean",children:(0,m.jsx)(v.Z,{name:"clean"})})]})})})),y=g.ZP.div(r||(r=(0,o.Z)(["\n  box-sizing: border-box;\n  padding: 15px 0;\n  border-bottom: 1px solid var(--bg-gray-100);\n  background-color: var(--bg-white-100);\n  position: sticky;\n  top: 0;\n  left: 0;\n  z-index: 10;\n  .searchbox {\n    width: min(670px, 100%);\n    height: 46px;\n    display: flex;\n    box-shadow: 0 0 0 1px rgb(0 0 0 / 5%), 0 2px 4px 1px rgb(0 0 0 / 9%);\n    border-radius: 26px;\n    transition: all 0.3s;\n    &:hover {\n      box-shadow: 0 0 0 1px rgb(0 0 0 / 10%), 0 2px 4px 1px rgb(0 0 0 / 11%);\n    }\n  }\n  .search_input {\n    flex: 1;\n    font-size: 16px;\n    color: var(--font-gray-200);\n  }\n  .search_btn svg,\n  .search_clean svg {\n    width: 30px;\n    height: 30px;\n    margin: 8px 10px;\n    border-radius: 50%;\n    fill: var(--bg-gray-100);\n    cursor: pointer;\n  }\n  .search_clean svg {\n    width: 20px;\n    margin: 8px 16px;\n  }\n  .search_clean {\n    /* visibility: ","; */\n    visibility: hidden;\n  }\n"])),(function(n){return n.empty?"hidden":"visible"})),j=b,w=d.memo((function(n){var e=n.searchHandler,i=(0,u.v9)((function(n){return n.search.history})),r=(0,u.I0)();return(0,m.jsx)(Z,{children:0===i.length?(0,m.jsx)("p",{children:"\u6682\u65e0\u641c\u7d22\u5386\u53f2"}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"history_items",onClick:function(n){if("history_item"===n.target.className){var i=n.target.innerText;e(i)}},children:i.map((function(n,e){return(0,m.jsx)("div",{className:"history_item",children:n},e)}))}),(0,m.jsx)("div",{className:"history_handle",children:(0,m.jsxs)("div",{className:"clear_history",onClick:function(){r((0,x.QQ)())},children:[(0,m.jsx)(v.Z,{name:"garbage"}),(0,m.jsx)("span",{children:"\u6e05\u9664\u5386\u53f2"})]})})]})})})),Z=g.ZP.div(t||(t=(0,o.Z)(["\n  width: min(800px, 100%);\n  & > p {\n    color: var(--font-gray-200);\n    font-size: 15px;\n    margin: 20px;\n    text-align: center;\n  }\n  .history_item,\n  .clear_history {\n    display: inline-block;\n    padding: 5px 7px;\n    background-color: var(--bg-gray-100);\n    margin: 10px;\n    color: var(--font-white-100);\n    border-radius: 6px;\n    font-size: 14px;\n    cursor: pointer;\n  }\n  .history_handle {\n    width: 100%;\n    height: 50px;\n  }\n  .clear_history {\n    float: right;\n    padding: 5px 10px;\n    font-size: 15px;\n    svg {\n      width: 14px;\n      height: 14px;\n      fill: var(--bg-white-100);\n      margin-right: 3px;\n    }\n  }\n"]))),k=w,_=i(1415),C=i(9682),N=i(6822),E=i(8759),P=i(2726),z=i(620),q=d.memo((function(n){var e=n.searchHandler,i=n.currentPageRef,r=n.isLoading;n.isError;(0,P.Z)();var t=(0,u.I0)(),a=(0,u.v9)((function(n){return{songs:n.search.songs,quality:n.setting.quality}})),s=a.songs,o=a.quality,l=(0,d.useMemo)((function(){var n=new Set;return s.filter((function(e){var i=e.id;return!n.has(i)&&(n.add(i),!0)}))}),[s]),g=(0,h.lr)(),p=(0,c.Z)(g,1)[0],x=(0,d.useCallback)((function(n){if(i.current<2){var r=p.get("keywords");e(r,++i.current)}else n({loading:!1,isError:!1})}),[i,e,p]),f=(0,d.useRef)(""),v=(0,d.useMemo)((function(){var n=p.get("keywords");return f.current!==n&&(f.current=n,r)}),[r,p]),b=(0,d.useCallback)((function(n){var e=n.id,i=n.name,r=n.artist;t((0,N.A7)(!0)),(0,z.C)("\u6b63\u5728\u5c1d\u8bd5\u83b7\u53d6\u97f3\u9891..."),t((0,E.XG)({id:e,name:i,artist:r,br:o})).then((function(){(0,z.C)("\u83b7\u53d6\u6210\u529f")})).catch((function(){(0,z.C)("\u672a\u77e5\u9519\u8bef\uff0c\u83b7\u53d6\u5931\u8d25")}))}),[t,o]);return(0,m.jsx)("div",{children:v?(0,m.jsx)(R,{children:(0,m.jsx)(C.E,{})}):(0,m.jsx)(_.Z,{songs:l,scrollToBottom:x,DoubleClick:b,loadMore:!0})})})),R=g.ZP.div(a||(a=(0,o.Z)(["\n  width: 100%;\n  height: 70px;\n  position: relative;\n"]))),T=q,M=i(2610),I=i(3433);var U=(0,g.ZP)(p.E.div)(s||(s=(0,o.Z)(["\n  width: 95%;\n  margin: 0 auto;\n"]))),L=function(){var n=(0,u.I0)(),e=(0,h.lr)(),i=(0,c.Z)(e,2),r=i[0],t=i[1],a=(0,d.useRef)(1),s=function(){var n=(0,d.useState)([!0,!1]),e=(0,c.Z)(n,2),i=(0,c.Z)(e[0],2),r=i[0],t=i[1],a=e[1],s=(0,u.v9)((function(n){return n.search.songsCache})),o=(0,u.I0)();return(0,P.Z)(),{isLoading:r,isError:t,fetchSongs:(0,d.useCallback)((function(n,e){if(a([!0,!1]),s[n]&&s[n][e]&&s[n][e].length>0){for(var i=[],r=1;r<=e;r++)i=[].concat((0,I.Z)(i),(0,I.Z)(s[n][r]));o((0,x.ik)(i)),a([!1,!1])}else o((0,x.Rh)({keywords:n})),o((0,x.M$)({keywords:n,offset:30*(e-1)})).then((function(i){var r=i.payload,t=r&&r.songs||[];t.length>0?o((0,x.ow)({ids:t.map((function(n){return n.id})).join(","),keywords:n,offset:30*(e-1)})).then((function(){a([!1,!1])})):a([!1,!0])}))}),[o,s])}}(),o=s.isLoading,g=s.isError,p=s.fetchSongs,f=(0,d.useCallback)((function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e!==r.get("keywords")&&(a.current=1,n((0,x.PI)())),p(e,i),t((function(n){return(0,l.Z)((0,l.Z)({},n),{},{keywords:e})}))}),[t,n,r,p]);return(0,d.useEffect)((function(){r.get("keywords")&&f(r.get("keywords"))}),[]),(0,m.jsxs)(U,{variants:M.qG,initial:"enter",animate:"show",transition:"transition",exit:"exit",children:[(0,m.jsx)(j,{searchHandler:f}),r.get("keywords")?(0,m.jsx)(T,{searchHandler:f,currentPageRef:a,isLoading:o,isError:g}):(0,m.jsx)(k,{searchHandler:f})]},"searchPage")}},2952:function(n,e,i){i.r(e);var r,t,a,s,o,l,c=i(168),d=i(8963),h=i(3431),u=i(9349),g=i(9607),p=i(1245),x=i(1816),f=i(2741),v=i(6822),m=i(7058),b=i(1750),y=i(2610),j=i(4990),w=i(2726),Z=i(620),k=i(5859),_=(0,u.ZP)(g.E.div)(r||(r=(0,c.Z)(["\n  width: 95%;\n  margin: 0 auto;\n  padding-top: 20px;\n"]))),C=u.ZP.div(t||(t=(0,c.Z)(["\n  background: var(--bg-gray-210);\n  border-radius: 20px;\n  display: grid;\n  align-items: center;\n  height: 100px;\n  color: var(--font-gray-200);\n  grid-template-columns: 130px 200px 1fr 120px;\n  .avatar {\n    width: 80px;\n    height: 80px;\n    margin-left: 20px;\n    border-radius: 50%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    overflow: hidden;\n  }\n  .user_avatar {\n    width: 100%;\n    height: 100%;\n    transform: scale(1);\n    border: none;\n\n    .icon {\n      width: inherit;\n      height: inherit;\n      fill: var(--bg-gray-100);\n    }\n  }\n  .nickname {\n    font-size: 32px;\n    font-weight: bold;\n    width: 100%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  .logout {\n    grid-column: 4;\n    height: 36px;\n    line-height: 38px;\n    cursor: pointer;\n    width: 90px;\n    transition: all 0.3s;\n    border-radius: 8px;\n    .logout_svg {\n      float: left;\n      margin: 0 10px;\n      width: 24px;\n      height: 36px;\n      svg {\n        width: inherit;\n        height: inherit;\n        fill: var(--bg-gray-100);\n        transition: all 0.3s;\n      }\n    }\n    &:hover {\n      background-color: var(--bg-gray-210);\n      color: var(--font-red-100);\n      svg {\n        fill: var(--font-red-100);\n      }\n    }\n  }\n"]))),N=u.ZP.div(a||(a=(0,c.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 80px;\n  font-size: 20px;\n  font-weight: bold;\n  color: var(--font-gray-200);\n  h2 {\n    margin-left: 10px;\n  }\n  .setting_item {\n    height: 50px;\n    line-height: 50px;\n    margin-right: 10px;\n    color: var(--font-gray-200);\n    border-radius: 12px;\n    overflow: hidden;\n    font-size: 14px;\n  }\n"]))),E=(0,u.ZP)(N)(s||(s=(0,c.Z)(["\n  margin-top: 20px;\n  .setting_item {\n    background: var(--bg-gray-210);\n  }\n  select {\n    width: 160px;\n    height: inherit;\n    border: none;\n    outline: none;\n    appearance: none;\n    color: inherit;\n    background: transparent;\n  }\n  option {\n    text-align: center;\n  }\n"]))),P=(0,u.ZP)(N)(o||(o=(0,c.Z)(["\n  .setting_item {\n    display: flex;\n  }\n  input {\n    height: inherit;\n    padding: 0 10px;\n    width: 300px;\n    min-width: 150px;\n    background: var(--bg-gray-210);\n  }\n  button {\n    height: inherit;\n    padding: 0 24px;\n    cursor: pointer;\n    border-left: 1px solid var(--bg-gray-100);\n    background: var(--bg-gray-210);\n    transition: all 0.1s;\n    &:hover {\n      opacity: 0.8;\n    }\n    &:active {\n      opacity: 1;\n    }\n  }\n"]))),z=(0,u.ZP)(P)(l||(l=(0,c.Z)(["\n  input {\n    width: 150px;\n    min-width: 100px;\n    appearance: textfield;\n  }\n  input[type='number']::-webkit-inner-spin-button,\n  input[type='number']::-webkit-outer-spin-button {\n    appearance: none;\n    margin: 0;\n  }\n"])));e.default=function(){(0,w.Z)();var n=(0,h.v9)((function(n){return{profile:n.user.profile,quality:n.setting.quality,baseUrl:n.setting.baseUrl,animationTime:n.setting.animationTime}})),e=n.profile,i=n.quality,r=n.baseUrl,t=n.animationTime,a=e.nickname,s=e.avatarUrl,o=(0,h.I0)(),l=(0,d.useRef)(),c=(0,d.useRef)();return(0,k.jsxs)(_,{variants:y.qG,initial:"enter",animate:"show",transition:"transition",exit:"exit",children:[(0,k.jsxs)(C,{children:[(0,k.jsx)("div",{className:"avatar",children:(0,k.jsx)(p.Z,{src:s,iconame:"user",className:"user_avatar"})}),(0,k.jsx)("div",{className:"nickname",children:a}),(0,k.jsxs)("div",{className:"logout",onClick:function(){o((0,v.A7)(!0)),o((0,f.kS)())},children:[(0,k.jsx)("div",{className:"logout_svg",children:(0,k.jsx)(x.Z,{name:"logout"})}),"\u767b\u51fa"]})]}),(0,k.jsxs)(E,{children:[(0,k.jsx)("h2",{children:"\u97f3\u8d28\u8bbe\u7f6e"}),(0,k.jsx)("div",{className:"setting_item",children:(0,k.jsx)("select",{name:"quality",onChange:function(n){o((0,m.r6)(n.target.value))},defaultValue:i,children:j.g0.map((function(n){return(0,k.jsx)("option",{value:n.value,children:n.name},n.id)}))})})]}),(0,k.jsxs)(P,{children:[(0,k.jsx)("h2",{children:"\u81ea\u5b9a\u4e49\u540e\u53f0\u63a5\u53e3"}),(0,k.jsxs)("div",{className:"setting_item",children:[(0,k.jsx)("input",{type:"text",placeholder:r,ref:l}),(0,k.jsx)("button",{onClick:function(){var n=l.current.value;/^https?:\/\//.test(n)&&(0,b.XH)(n).then((function(){o((0,m.O_)(n)),l.current.value="",(0,Z.C)("\u63a5\u53e3\u6d4b\u8bd5\u6210\u529f")})).catch((function(n){(0,Z.C)("\u63a5\u53e3\u6d4b\u8bd5\u5931\u8d25")}))},children:"\u6d4b\u8bd5"}),(0,k.jsx)("button",{onClick:function(){o((0,m.O_)("https://cplay-api.vercel.app")),l.current.value=""},children:"\u91cd\u7f6e"})]})]}),(0,k.jsxs)(z,{children:[(0,k.jsx)("h2",{children:"\u6b4c\u8bcd\u6eda\u52a8\u52a8\u753b\u65f6\u95f4"}),(0,k.jsxs)("div",{className:"setting_item",children:[(0,k.jsx)("input",{type:"number",placeholder:t,ref:c}),(0,k.jsx)("button",{onClick:function(){var n=c.current.value;""!==n&&(200<=+n&&+n<=800?(o((0,m.ez)(n)),c.current.value="",(0,Z.C)("\u8bbe\u7f6e\u6210\u529f")):(0,Z.C)("\u8d85\u51fa\u8303\u56f4200~800(ms)"))},children:"\u8bbe\u7f6e"}),(0,k.jsx)("button",{onClick:function(){o((0,m.ez)(300)),c.current.value=""},children:"\u91cd\u7f6e"})]})]})]},"settings")}}}]);